# 安卓保活技术

TODO：

【整理】安卓保活技术基础知识

---

## 思路和目的

* 安卓保活技术 思路和目的
  * 保活
    * 降低被杀可能
      * 提升进程优先级== 降低adj值
        * 微信和支付宝：实现了adj值为负数或0 == 创建系统级别的进程
          * 应该是底层native实现的某种黑科技，需要逆向才有机会搞懂
          * 一种可能：利用了系统漏洞来保活
  * 复活
    * 被杀后重启服务=重新拉起服务

## 安卓保活技术/手段/方案

* 安卓保活技术/手段/方案
  * 需要用户参与=需要引导用户操作
    * 【整理】安卓保活技术：引导用户开启手机白名单
    * 【整理】安卓保活技术：申请加入电池优化白名单
  * 保活
    * 防止被杀
      * 防止用户主动杀
        * 【整理】安卓保活技术：多任务列表窗口加锁
        * 【整理】安卓保活技术：多任务列表窗口隐藏App
    * 提升进程优先级
      * UI页面
        * 【整理】安卓保活技术：一像素
      * Service
        * 【整理】安卓保活技术：前台Service的导航
        * 【整理】安卓保活技术：后台无声音频
        * 【整理】安卓保活技术：无通知的前台服务
        * 【整理】安卓保活技术：START_STICKY和START_REDELIVER_INTENT
      * 属性
        * 【整理】安卓保活技术：属性persistent
    * 提高活跃度？间隔性唤醒 ？
      * 【整理】安卓保活技术：账户同步
      * 【整理】安卓保活技术：应用自启动权限
      * 【整理】安卓保活技术：监听系统事件广播
        * 【整理】安卓保活技术：监听系统事件广播之ACTION_TIME_TICK
      * 【整理】安卓保活技术：监听第三方静态广播
      * 【整理】安卓保活技术：WakeLock
      * 【整理】安卓保活技术：心跳机制
      * 【整理】安卓保活技术：socket长连接监控被杀重启主进程
    * 其他
      * 【整理】安卓保活技术：Instrumentation
      * 【整理】安卓保活技术：弹出悬浮窗
      * 【整理】安卓保活技术：无障碍服务
      * 【整理】安卓保活技术：WorkManager
  * 复活=被杀后重启服务
    * 【整理】安卓保活技术：双进程守护
    * 【整理】安卓保活技术：JobScheduler定时任务
    * 【整理】安卓保活技术：AlarmManager
    * 【整理】安卓保活技术：WorkManager
    * 【整理】安卓保活技术：多个app关联唤醒
    * 【整理】安卓保活技术：第三方服务SDK
    * 【整理】安卓保活技术：Service的onDestroy和onTaskRemoved
    * 【整理】安卓保活技术：进程Service/Provider互绑
    * 【整理】安卓保活技术：AIDL矩阵互保
    * 【整理】安卓保活技术：SIGCHLD信号和用am startservice重启被杀掉的进程
    * 【整理】安卓保活技术：腾讯TIM的进程永生技术
    * 【整理】安卓保活技术：setsid和用am startservice重启被杀掉的进程
